<!doctype html>
  <html lang="de">
    <head>
      <title>Share Data via Broadcast Channel API // Christian Noss</title>
      <meta name="robots" content="noindex">
    <meta name="googlebot" content="noindex">
    <meta name="googlebot-news" content="noindex">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

      <link rel="stylesheet" href="/slides/reveal/dist/reset.css">
      <link rel="stylesheet" href="/slides/reveal/dist/reveal.css">
      <link rel="stylesheet" href="/slides/assets/main.css">
     
      <link rel="icon" type="image/svg" href="/slides/assets/images/preview_black_24dp.svg">
  
      <!-- Theme used for syntax highlighted code -->
      <link rel="stylesheet" href="/slides/reveal/plugin/highlight/github.css">
    </head>
    <body>
      <div class="reveal">
        <div class="slides">
          
      <section data-slide-class="wrap" class="mi-slide 
      wrap "    data-transition="slide">
      <section data-slide-shortcode-class="interlude" data-background-color="#2b2b2b" class="image screenshot interlude" ><div><h1 class="title">Share Data via Broadcast Channel API & window.postMessage</h1><h2 class="subtitle js-delay"><p>Publish‚ÄìSubscribe Messaging</p>
</h2></div></section>
<section data-slide-shortcode-class="screenshot" class="image is-fullscreen no-shadow" data-background="./images/broadcast-channel.png" data-transition="fade" data-background-transition="fade"><div class="bu"><p><p>Share Data via <a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API</a> &amp; <a href="https://developer.mozilla.org/en-us/docs/Web/API/Window/postMessage">window.postMessage</a></p>
</p></div></section>
<p><section data-transition="fade" data-slide-shortcode-class="codeSmall" class="codeSmall"><div><h1 class="title">Using Broadcast Channel API</h1><p>The window.postMessage() method safely enables cross-origin communication between Window objects; e.g., between a page and a pop-up that it spawned, or between a page and an iframe embedded within it.</p></p>
<div class="code-columns"><pre class="code-wrapper"><samp class="code"><span class="hljs-comment">// In (first) window</span>
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Open Broadcast Channel</span>
<span class="hljs-keyword">const</span> windowPositionChannel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">&#x27;window-position&#x27;</span>);
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">/* some lines of funky code */</span>
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Send my window position to the channel</span>
windowPositionChannel.<span class="hljs-title function_">postMessage</span>(myWindowPosition);
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Receive messages from the channel</span>
windowPositionChannel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> otherWindowPosition = event.<span class="hljs-property">data</span>;
  <span class='hljs-break'>/* break */</span>
  <span class="hljs-comment">// Do something meaningful with the data üï∫üèº</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(otherWindowPosition.<span class="hljs-property">x</span>, otherWindowPosition.<span class="hljs-property">y</span>);
}
</samp></pre><pre class="code-wrapper"><samp class="code"><span class="hljs-comment">// In (second) window</span>
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Open Broadcast Channel</span>
<span class="hljs-keyword">const</span> windowPositionChannel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">&#x27;window-position&#x27;</span>);
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">/* some lines of funky code */</span>
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Send my window position to the channel</span>
windowPositionChannel.<span class="hljs-title function_">postMessage</span>(myWindowPosition);
<span class='hljs-break'>/* break */</span>
<span class="hljs-comment">// Receive messages from the channel</span>
windowPositionChannel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> otherWindowPosition = event.<span class="hljs-property">data</span>;
  <span class='hljs-break'>/* break */</span>
  <span class="hljs-comment">// Do something meaningful with the data üï∫üèº</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(otherWindowPosition.<span class="hljs-property">x</span>, otherWindowPosition.<span class="hljs-property">y</span>);
}
</samp></pre></div></div></section>
<section data-slide-shortcode-class="simple-text" class="simple" data-transition="{"transition":"slide"}">
    <div><h1 class="title">Broadcast Channel API & window.postMessage()</h1><p>The window.postMessage() method safely enables cross-origin communication between Window objects; e.g., between a page and a pop-up that it spawned, or between a page and an iframe embedded within it. The Broadcast Channel API is restricted on same origin communication.</p>
<p>If a participant (tab, window, worker) sends a message via BroadcastChannel.postMessage(), it is sent to all other participants in the channel - but not to the sender itself.</p>
<p>‚ö†Ô∏è Note that window.postMessage() also works without the Broadcast Channel API.</p>
</div></section>
<section data-slide-shortcode-class="simple-text" class="simple" data-transition="{"transition":"slide"}">
    <div><h1 class="title">Advantages ü•≥</h1><ul>
<li>combines broadcasting and direct messaging</li>
<li>works well for decoupled, event-based communication</li>
<li>no shared memory needed ‚Äî everything flows through messages</li>
<li>no direct window references needed</li>
<li>scalable to multiple tabs and controlled windows</li>
</ul>
</div></section>
<section data-slide-shortcode-class="simple-text" class="simple" data-transition="{"transition":"slide"}">
    <div><h1 class="title">Disadvantages üò¢</h1><ul>
<li>requires same-origin (for BroadcastChannel)</li>
<li>no built-in state ‚Äî messages must be actively passed around</li>
<li>no message history ‚Äî late listeners miss earlier messages</li>
</ul>
</div></section>
<section data-slide-shortcode-class="screenshot" class="image is-fullscreen no-shadow" data-background="./images/broadcast-channel.png" data-transition="fade" data-background-transition="fade"><div class="bu"><p><p>Share Data via <a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API</a> &amp; <a href="https://developer.mozilla.org/en-us/docs/Web/API/Window/postMessage">window.postMessage</a></p>
</p></div></section>
<footer><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API MDN</a></li>
<li><a href="https://developer.mozilla.org/en-us/docs/Web/API/Window/postMessage">window.postMessage MDN</a></li>
<li><a href="https://cnoss.github.io/multi-window-experiences/00-core-concepts/post-message-demo/index.html">Demo Implementation</a></li>
</ul>
</footer>
      
      
      
      </section>
      
        </div>

      </div>
      
      <script src="/slides/reveal/dist/reveal.js"></script>
      <script src="/slides/assets/scripts/libs/fittext.js"></script>
      <script src="/slides/assets/scripts/main.js"></script>
      <script src="/slides/reveal/plugin/notes/notes.js"></script>
      <script src="/slides/reveal/plugin/markdown/markdown.js"></script>
      <script src="/slides/reveal/plugin/highlight/highlight.js"></script>
      <script src="/slides/reveal/plugin/zoom/zoom.js"></script>
      <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
          hash: true, 
          center: false,
          disableLayout: true,
          progress: true,
          backgroundTransition: 'fade',
          highlight: {
            highlightOnLoad: false,
          },
          // Learn about plugins: https://revealjs.com/plugins/
          plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom]
        }).then(() => {
          const highlight = Reveal.getPlugin('highlight');
          highlight.hljs.configure(
            {
              languages: ['javascript', 'css', 'html', 'bash', 'json', 'markdown', 'xml', 'yaml'],
            }
          );
          highlight.hljs.highlightAll();
        });

        
      </script>
    </body>
  </html>